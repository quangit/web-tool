---
import BaseHashPage from '../../components/BaseHashPage.astro';
import OutputEncodingSelect from '../../components/OutputEncodingSelect.astro';
import InputEncodingSelect from "../../components/InputEncodingSelect.astro";
import HMACSettings from '../../components/HMACSettings.astro';
---

<BaseHashPage
  title="RIPEMD-320"
  description="This RIPEMD-320 online tool helps you calculate hashes from strings. You can input UTF-8, UTF-16, Hex, Base64, or other encodings. It also supports HMAC."
  activePage="hash/ripemd-320"
  isUseFile={false}
>
  <div class="setting">
    <label for="input-type">Input Encoding</label>
    <InputEncodingSelect id="input-type" dataShare="input_type" dataAutoUpdate={true} />
  </div>

  <div class="setting">
    <label for="output-type">Output Encoding</label>
    <OutputEncodingSelect id="output-type" dataShare="output_type" dataAutoUpdate={true} />
  </div>

  <HMACSettings />

  <!-- Load HMAC support FIRST (like in HTML) -->
  <script is:inline slot="scripts">
    ++waitLoadCount;
    delayScripts.push({
      src: '/js/hmac.js?v=2'
    });
  </script>

  <!-- Load crypto-api wrapper and set window.method -->
  <script is:inline slot="scripts">
    ++waitLoadCount;
    delayScripts.push({
      src: '/js/crypto-api.js',
      onload: function () {
        window.method = ripemd320;
        methodLoad();
      }
    });
  </script>

  <!-- Load crypto-api library from CDN -->
  <script is:inline slot="scripts">
    ++waitLoadCount;
    delayScripts.push({
      src: 'https://nf404.github.io/crypto-api/crypto-api.min.js',
      onload: function () {
        methodLoad();
      }
    });
  </script>

  <!-- Load encoding support -->
  <script is:inline slot="scripts">
    ++waitLoadCount;
    delayScripts.push({
      src: '/js/encoding.js?v=8',
      onload: function () {
        methodLoad();
      }
    });
  </script>

  <!-- Load clipboard support -->
  <script is:inline slot="scripts">
    delayScripts.push({
      src: '/js/clipboard.min.js',
      onload: function () {
        new ClipboardJS('[data-toggle="copy"]').on('success', function (e) {
          showMessage(e.trigger.getAttribute('data-message'));
          gtag('event', 'copy');
        });
      },
      delay: 100
    });
  </script>
</BaseHashPage>
